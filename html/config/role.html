<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="all,follow">
    <link rel="stylesheet" href="../../vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../vendor/layui/css/layui.css">
    <link rel="stylesheet" href="../../css/style.default.css" id="theme-stylesheet">
</head>

<body>
    <!-- 主体内容区 -->
    <div class="content-inner" style=" background-color: white; z-index: 0;">
        <!-- ===================================================== -->
        <!-- 请在此处编写你的业务代码 -->
        <!-- ===================================================== -->
        <fieldset class="layui-elem-field layui-field-title">
            <legend>角色列表</legend>
            <div class="layui-field-box">
                <div class="work-area" style="margin-top: 10px;margin-left: 10px">
                    <div class="layui-form layui-card-header layuiadmin-card-header-auto">
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label" style="width: 90px">角色名称</label>
                                <div class="layui-input-block">
                                    <input name="loginname" class="layui-input" type="text" placeholder="请输入角色名称"
                                        autocomplete="off">
                                </div>
                            </div>

                            <div class="layui-inline" style="margin-top: -1%;">
                                <button class="layui-btn layuiadmin-btn-admin" lay-filter="LAY-user-back-search"
                                    lay-submit="">
                                    <i class="layui-icon layui-icon-search layuiadmin-button-btn"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- 定义角色授权按钮 -->
                    <script type="text/html" id="authorizationbar">
                    <div class="layui-btn-group">
                        <button type="button" class="layui-btn layui-btn-xs">角色授权</button>
                    </div>
                </script>
                    <!-- 定义行工具 -->
                    <script type="text/html" id="bar">
                    <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
                    <a class="layui-btn layui-btn-xs" lay-event="edit" style="color:white;">编辑</a>
                    <a class="layui-btn layui-btn-danger layui-btn-xs"  style="color:white;" lay-event="del">删除</a>
                </script>
                    <!-- 定义头部工具栏 -->
                    <script id="toolbar" type="text/html">
                <div class="layui-btn-group">
                    <button type="button" class="layui-btn layui-btn-primary layui-btn-sm">
                        <i class="layui-icon">&#xe654;</i>
                    </button>
                    <button type="button" class="layui-btn layui-btn-primary layui-btn-sm">
                        <i class="layui-icon">&#xe642;</i>
                    </button>
                    <button type="button" class="layui-btn layui-btn-primary layui-btn-sm">
                        <i class="layui-icon">&#xe640;</i>
                    </button>
                 </div>
              </script>
                    <table class="layui-hide" id="role"></table>
                </div>
            </div>
        </fieldset>
    </div>

    <!-- js插件 -->
    <script src="../../vendor/jquery/jquery.min.js"></script>
    <script src="../../vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../vendor/layui/layui.js"></script>
    <script src="../../js/front.js"></script>

    <script>
        var baseUrl = "/hqigservice";
        layui.use('table', function () {
            var table = layui.table;

            // 表格初始化
            table.render({
                title: '基础-用户信息表',
                elem: '#role',
                height: 'full-300',
                method: 'POST',
                contentType: 'application/json',
                limit: 30,
                url: baseUrl + '/getRoleList.json',
                where: {
                    "userInfo": {
                        "userId": 1,
                        "userName": "许明",
                        "sessionId": "123456"
                    },
                    "pageNo": 1,
                    "pageSize": 20
                },
                parseData: function (res) {
                    return {
                        code: 0,
                        msg: "",
                        count: 10,
                        data: res.roleList
                    };
                },
                toolbar: '#toolbar',
                page: true,
                cols: [[
                    {
                        type: 'checkbox', fixed: 'left'
                    },
                    {
                        field: 'roleId', title: '序号', sort: false, fixed: 'center'
                    },
                    {
                        field: 'roleName', title: '角色名称', sort: false, fixed: 'center'
                    },
                    {
                        field: 'authorization', title: '授权', width: '12%', sort: false, align: 'center', toolbar: '#authorizationbar'
                    },

                    {
                        fixed: 'right', title: '操作', width: 165, align: 'center', toolbar: '#bar'
                    },
                ]]
            })
        });

        //头工具栏事件
        table.on('toolbar(role)', function (obj) {
            var checkStatus = table.checkStatus(obj.config.id);
            switch (obj.event) {
                case 'getCheckData':
                    var data = checkStatus.data;
                    layer.alert(JSON.stringify(data));
                    break;
                case 'getCheckLength':
                    var data = checkStatus.data;
                    layer.msg('选中了：' + data.length + ' 个');
                    break;
                case 'isAll':
                    layer.msg(checkStatus.isAll ? '全选' : '未全选');
                    break;
            };
        });

        //监听行工具事件
        table.on('tool(test)', function (obj) {
            var data = obj.data;
            //console.log(obj)
            if (obj.event === 'del') {
                layer.confirm('真的删除行么', function (index) {
                    obj.del();
                    layer.close(index);
                });
            } else if (obj.event === 'edit') {
                layer.prompt({
                    formType: 2
                    , value: data.email
                }, function (value, index) {
                    obj.update({
                        email: value
                    });
                    layer.close(index);
                });
            }
        });
    </script>
</body>

</html>